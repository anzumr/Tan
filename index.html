<!doctype html>
<html lang="en">
<head>
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>For Anika ‚ù§Ô∏è</title>

  <!-- Font -->
  <link href="https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@300;400;600&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">

  <!-- Confetti library -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>

  <style>
    :root {
      --pink1: #ff8cd6;
      --purple1: #b084f7;
      --accent: #ff5f8f;
      --card-bg: rgba(255,255,255,0.88);
      --rounded: 24px;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont;
      min-height: 100vh;
      margin: 0;
      background:
        linear-gradient(135deg, rgba(255,140,214,0.7), rgba(176,132,247,0.8)),
        url("peonies.jpg") center/cover fixed no-repeat;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #111;
      /* we KEEP the normal cursor so you see arrow + fish */
    }

    /* Shared overlay style */
    .overlay {
      position: fixed;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
      z-index: 10;
    }

    /* ---------------- LOCK SCREEN (iPhone style) ---------------- */

    #lockScreen {
      backdrop-filter: blur(15px);
      background:
        linear-gradient(180deg, rgba(0,0,0,0.55), rgba(0,0,0,0.8)),
        url("peonies.jpg") center/cover no-repeat;
      color: #fff;
      flex-direction: column;
      justify-content: space-between;
      padding: 32px 16px 40px;
      font-family: "SF Pro Display", system-ui;
    }

    .lock-content {
      width: 100%;
      max-width: 420px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      height: 100%;
      justify-content: space-between;
      align-items: center;
    }

    .lock-top {
      text-align: center;
      margin-top: 40px;
    }

    .lock-time {
      font-size: 64px;
      line-height: 1;
      font-weight: 300;
      letter-spacing: 2px;
    }

    .lock-ampm {
      font-size: 18px;
      margin-left: 4px;
      vertical-align: top;
    }

    .lock-date {
      margin-top: 6px;
      font-size: 16px;
      opacity: 0.85;
    }

    .lock-widgets {
      margin-top: 40px;
      width: 100%;
      display: flex;
      gap: 12px;
      justify-content: center;
      font-size: 13px;
    }

    .widget {
      flex: 1;
      min-width: 0;
      padding: 10px 12px;
      border-radius: 14px;
      background: rgba(0,0,0,0.35);
      border: 1px solid rgba(255,255,255,0.18);
      display: flex;
      flex-direction: column;
      gap: 4px;
      text-align: left;
    }

    .widget-title {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      opacity: 0.8;
    }

    .widget-main {
      font-size: 13px;
      font-weight: 500;
    }

    .widget-sub {
      font-size: 11px;
      opacity: 0.9;
    }

    .lock-bottom-text {
      text-align: center;
      font-size: 14px;
      opacity: 0.9;
      margin-bottom: 6px;
    }

    .lock-home-indicator {
      width: 120px;
      height: 4px;
      border-radius: 999px;
      background: rgba(255,255,255,0.85);
    }

    /* -------- PASSWORD SCREEN -------- */

    #passwordPage {
      display: none;
      backdrop-filter: blur(12px);
      background: rgba(0,0,0,0.65);
      color: #fff;
      flex-direction: column;
      text-align: center;
    }

    .pw-card {
      background: rgba(0,0,0,0.55);
      padding: 24px 20px;
      border-radius: 20px;
      max-width: 340px;
      width: 100%;
      border: 1px solid rgba(255,255,255,0.16);
    }

    .pw-title {
      font-size: 20px;
      margin-bottom: 6px;
    }

    .pw-sub {
      font-size: 13px;
      opacity: 0.9;
      margin-bottom: 16px;
    }

    .pw-input {
      width: 100%;
      padding: 12px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.6);
      background: rgba(0,0,0,0.4);
      color: #fff;
      font-size: 18px;
      text-align: center;
      margin-bottom: 12px;
    }

    .pw-button {
      width: 100%;
      padding: 10px 16px;
      border-radius: 999px;
      border: none;
      background: linear-gradient(90deg, var(--pink1), var(--purple1));
      color: #fff;
      font-size: 15px;
      cursor: pointer;
      font-weight: 500;
    }

    .pw-error {
      margin-top: 8px;
      font-size: 12px;
      color: #ffd0d0;
      min-height: 16px;
    }

    /* -------- LOVE LETTER SCREEN -------- */

    #loveLetter {
      display: none;
      backdrop-filter: blur(14px);
      background: rgba(0,0,0,0.35);
      color: #111;
    }

    .letter-card {
      max-width: 640px;
      width: 100%;
      padding: 26px 22px 24px;
      background: var(--card-bg);
      border-radius: 24px;
      box-shadow: 0 16px 40px rgba(0,0,0,0.18);
      animation: fadeIn 0.9s ease;
    }

    .letter-card h2 {
      font-size: 22px;
      margin-bottom: 12px;
    }

    .letter-card p {
      font-size: 15px;
      line-height: 1.5;
      margin-bottom: 10px;
    }

    #continueBtn {
      margin-top: 10px;
      padding: 11px 16px;
      border-radius: 999px;
      border: none;
      background: var(--accent);
      color: #fff;
      font-size: 15px;
      cursor: pointer;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    /* -------- SURVEY PAGE -------- */

    #surveyPage {
      position: relative;
      width: 100%;
      max-width: 840px;
      margin: 24px auto;
      padding: 16px;
      z-index: 1;
    }

    .survey-card {
      background: var(--card-bg);
      border-radius: var(--rounded);
      box-shadow: 0 16px 40px rgba(0,0,0,0.18);
      padding: 22px 18px 24px;
      max-height: 90vh;
      overflow-y: auto;
    }

    .survey-header {
      text-align: center;
      margin-bottom: 16px;
    }

    .survey-header h1 {
      font-size: 22px;
      margin-bottom: 4px;
    }

    .survey-header p {
      font-size: 14px;
      color: #555;
    }

    .photo-holder {
      width: 100%;
      display: flex;
      justify-content: center;
      margin-bottom: 12px;
    }

    #couplePhoto {
      width: 160px;
      height: 160px;
      border-radius: 40px;
      object-fit: cover;
      box-shadow: 0 10px 26px rgba(0,0,0,0.28);
      border: 4px solid #fff;
    }

    form {
      display: flex;
      flex-direction: column;
      gap: 18px;
      font-size: 14px;
    }

    .q {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      gap: 8px;
      width: 100%;
    }

    label {
      font-weight: 600;
    }

    /* iOS-style inputs & textareas */
    textarea,
    input[type="text"],
    select {
      width: 100%;
      padding: 11px 12px;
      border-radius: 16px;
      border: 1px solid #ffd0e8;
      font-size: 14px;
      background: rgba(255,255,255,0.95);
      box-shadow: 0 4px 10px rgba(0,0,0,0.03);
      transition: border-color 0.2s ease, box-shadow 0.2s ease, transform 0.15s ease;
    }

    textarea {
      min-height: 70px;
      resize: vertical;
    }

    textarea:focus,
    input[type="text"]:focus,
    select:focus {
      outline: none;
      border-color: var(--pink1);
      box-shadow: 0 0 0 1px rgba(255,140,214,0.4);
      transform: translateY(-1px);
    }

    .small {
      font-size: 12px;
      color: #777;
    }

    /* sliders */

    .slider-row {
      display: flex;
      flex-direction: column;
      gap: 6px;
      width: 100%;
    }

    input[type="range"] {
      width: 100%;
      -webkit-appearance: none;
      appearance: none;
      height: 6px;
      border-radius: 999px;
      background: linear-gradient(90deg, #ff758f, #f9ca24, #6ee7b7);
      outline: none;
    }

    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: #fff;
      border: 2px solid #ff6b9a;
      box-shadow: 0 0 6px rgba(0,0,0,0.35);
      cursor: pointer;
    }

    .slider-label {
      font-size: 13px;
      color: #555;
    }

    .chip-list {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 4px;
    }

    .chip {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid #ccc;
      font-size: 12px;
      background: #fff;
      cursor: pointer;
    }

    .chip input {
      margin: 0;
    }

    .hidden {
      display: none;
    }

    /* Follow-up boxes under the question, with fade-in */

    .followup-box {
      width: 100%;
      display: none;
      opacity: 0;
      transform: translateY(4px);
      transition: opacity 0.25s ease, transform 0.25s ease;
      margin-top: 6px;
    }

    .followup-box.show {
      display: block;
      opacity: 1;
      transform: translateY(0);
    }

    .followup-box textarea {
      margin-top: 6px;
    }

    /* submit button */

    #submitBtn {
      width: 100%;
      margin-top: 4px;
      padding: 13px 16px;
      border-radius: 999px;
      border: none;
      font-size: 16px;
      color: #fff;
      cursor: pointer;
      background: linear-gradient(90deg, #ff008c, #ffcd00, #00eaff, #c34dff);
      background-size: 400% 400%;
      animation: rainbow 7s linear infinite;
      box-shadow: 0 10px 26px rgba(0,0,0,0.20);
    }

    @keyframes rainbow {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* Congrats overlay for eating */

    #fullCongrats {
      position: fixed;
      inset: 0;
      z-index: 20;
      background: rgba(0,0,0,0.55);
      display: none;
      align-items: center;
      justify-content: center;
      padding: 16px;
    }

    .congrats-card {
      background: #fff;
      padding: 20px 20px 18px;
      border-radius: 20px;
      max-width: 340px;
      text-align: center;
      box-shadow: 0 14px 34px rgba(0,0,0,0.25);
    }

    .congrats-card h3 {
      font-size: 20px;
      margin-bottom: 8px;
    }

    .congrats-card p {
      font-size: 14px;
      margin-bottom: 12px;
    }

    #closeCongrats {
      padding: 8px 14px;
      border-radius: 999px;
      border: none;
      background: var(--accent);
      color: #fff;
      cursor: pointer;
      font-size: 14px;
    }

    /* -------- BETTA FISH CURSOR -------- */

    .betta-cursor {
      position: fixed;
      left: 0;
      top: 0;
      width: 80px;             /* adjust size if you want smaller/bigger */
      height: auto;
      pointer-events: none;    /* don't block clicking */
      z-index: 9999;
      filter: drop-shadow(0 0 10px rgba(255, 0, 80, 0.6));
      transition: transform 0.1s linear, filter 0.2s ease;
    }

    .betta-cursor.excited {
      filter: drop-shadow(0 0 16px rgba(255, 0, 140, 0.95));
    }

    /* small screens */

    @media (max-width: 480px) {
      .lock-time { font-size: 52px; }
      .lock-widgets { flex-direction: column; }
      .survey-card { padding: 20px 14px 22px; }
    }
  </style>
</head>
<body>

  <!-- BETTA FISH CURSOR IMAGE -->
  <img id="bettaCursor" class="betta-cursor" src="betta-fish.png" alt="Red betta fish cursor" />

  <!-- iPhone-style LOCK SCREEN -->
  <div id="lockScreen" class="overlay">
    <div class="lock-content">
      <div class="lock-top">
        <div class="lock-time">
          <span id="lockTime">9:41</span>
          <span id="lockAmPm" class="lock-ampm">PM</span>
        </div>
        <div id="lockDate" class="lock-date">Tuesday, September 17</div>

        <div class="lock-widgets">
          <!-- Weather -->
          <div class="widget">
            <div class="widget-title">Weather</div>
            <div id="weatherMain" class="widget-main">Loading...</div>
            <div id="weatherSub" class="widget-sub"></div>
          </div>
          <!-- Virgo -->
          <div class="widget">
            <div class="widget-title">Virgo Horoscope</div>
            <div id="horoscopeMain" class="widget-main">Soft focus on the details today.</div>
            <div id="horoscopeSub" class="widget-sub">You deserve gentleness, especially from yourself.</div>
          </div>
        </div>
      </div>

      <div>
        <div class="lock-bottom-text">Tap or swipe up to unlock</div>
        <div class="lock-home-indicator"></div>
      </div>
    </div>
  </div>

  <!-- PASSWORD PAGE -->
  <div id="passwordPage" class="overlay">
    <div class="pw-card">
      <div class="pw-title">Enter Passcode</div>
      <div class="pw-sub">Yes, you‚Äôre the only one who gets this üíó</div>
      <input id="pwInput" class="pw-input" type="password" maxlength="8" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢" />
      <button id="pwBtn" class="pw-button">Continue</button>
      <div id="pwError" class="pw-error"></div>
      <div style="margin-top:10px;font-size:12px;opacity:0.9;">(I‚Äôll tell you the password ü´∂)</div>
    </div>
  </div>

  <!-- LOVE LETTER PAGE -->
  <div id="loveLetter" class="overlay">
    <div class="letter-card">
      <h2>My little love letter to you üíå</h2>
      <p>
        Anika, every single day you somehow manage to be the softest part of my life.
        Before you answer anything, I just want you to know this:
        you matter to me more than I ever know how to explain in words.
      </p>
      <p>
        This page is just for you ‚Äî for your thoughts, your moods, your cravings,
        your good days and your rough ones. Thank you for trusting me with all of it.
      </p>
      <p>
        Whenever you fill this out, it‚Äôs my little window into how you‚Äôre feeling,
        and I promise I‚Äôll always use it to show up better for you. üíó
      </p>
      <button id="continueBtn">Okay, take me to the questions</button>
    </div>
  </div>

  <!-- CONGRATS OVERLAY WHEN FULL / 7‚Äì10 HUNGER -->
  <div id="fullCongrats">
    <div class="congrats-card">
      <h3>Yay, you ate! ü•∞</h3>
      <p>I‚Äôm so proud of you for taking care of yourself and your little tummy.</p>
      <button id="closeCongrats">Aww, thank you üíó</button>
    </div>
  </div>

  <!-- SURVEY PAGE -->
  <div id="surveyPage">
    <div class="survey-card">
      <div class="photo-holder">
        <img id="couplePhoto" src="couple.jpg" alt="Us üíï">
      </div>

      <div class="survey-header">
        <h1>Questions for Anika üíó</h1>
        <p>Answer whenever you feel like it ‚Äî it all goes straight to me.</p>
      </div>

      <form action="https://formspree.io/f/mgvbqbal" method="POST">

        <!-- 1. DAY SLIDER -->
        <div class="q">
          <label>1. How is your day going? ‚ú®</label>
          <div class="slider-row">
            <input id="daySlider" type="range" min="0" max="10" value="5" name="day_score">
            <div class="slider-label">
              <span id="dayLabel">5</span>/10 ‚Äî 0 = really rough, 10 = amazing
            </div>
          </div>

          <!-- Bad day follow-up -->
          <div id="dayBadFollowup" class="small followup-box">
            What‚Äôs wrong? (You can pick more than one)
            <div class="chip-list" style="margin-top:6px;">
              <label class="chip"><input type="checkbox" name="day_bad_reasons[]" value="overstimulated"> Overstimulated</label>
              <label class="chip"><input type="checkbox" name="day_bad_reasons[]" value="hungry"> Hungry</label>
              <label class="chip"><input type="checkbox" name="day_bad_reasons[]" value="tired"> Tired</label>
              <label class="chip"><input type="checkbox" name="day_bad_reasons[]" value="road rage"> Road rage</label>
              <label class="chip"><input type="checkbox" name="day_bad_reasons[]" value="family"> Family</label>
              <label class="chip"><input type="checkbox" name="day_bad_reasons[]" value="annoying person"> Annoying person</label>
              <label class="chip"><input type="checkbox" name="day_bad_reasons[]" value="anzum"> Anzum</label>
            </div>
          </div>

          <!-- Good day follow-up -->
          <div id="dayGoodFollowup" class="small followup-box">
            Your day sounds pretty good üòå What‚Äôs so good about it?
            <textarea name="day_good_why"></textarea>
          </div>
        </div>

        <!-- 2. HUNGER SLIDER -->
        <div class="q">
          <label>2. Hunger check üçΩÔ∏è</label>
          <div class="slider-row">
            <input id="hungerSlider" type="range" min="0" max="10" value="5" name="hunger_level">
            <div class="slider-label">
              <span id="hungerLabel">5</span>/10 ‚Äî 0 = starving, 10 = full
            </div>
          </div>

          <!-- Hungry 0‚Äì3 -->
          <div id="hungerHungryFollowup" class="small followup-box">
            You‚Äôre hungry üò≠ What are you in the mood to eat / craving?
            <textarea name="hunger_craving"></textarea>
          </div>
        </div>

        <!-- 3. TREATMENT SLIDER -->
        <div class="q">
          <label>3. How have I treated you today? üíï</label>
          <div class="slider-row">
            <input id="treatSlider" type="range" min="0" max="10" value="7" name="treated_rating">
            <div class="slider-label">
              <span id="treatLabel">7</span>/10 ‚Äî 0 = bad, 10 = perfect
            </div>
          </div>

          <!-- Textbox follow-up for 0‚Äì9 -->
          <div id="treatFollowup" class="small followup-box">
            What can I do to treat you better?
            <textarea name="treated_feedback" placeholder="Tell me so I can improve üíó"></textarea>
          </div>
        </div>

        <!-- 4. Improve your day -->
        <div class="q">
          <label>4. What‚Äôs something small that would make your evening sweeter right now? üåô</label>
          <textarea name="best_part"></textarea>
        </div>

        <!-- 5. Something to do together soon -->
        <div class="q">
          <label>5. Something you‚Äôd like us to do together soon? üöóüçø</label>
          <input type="text" name="plans" placeholder="Picnic, drive, movie night, etc." />
        </div>

        <!-- 6. Music -->
        <div class="q">
          <label>6. What is today's anthem or song of the day? üéß</label>
          <textarea name="feel_loved"></textarea>
        </div>

        <!-- 7. Extra thoughts -->
        <div class="q">
          <label>7. Anything you want to tell me or get off your mind? üß†</label>
          <textarea name="extra"></textarea>
        </div>

        <!-- Hidden spam honeypot -->
        <div style="display:none;">
          <label>Leave this blank</label>
          <input name="phone_number">
        </div>

        <button id="submitBtn" type="submit">Send to me ‚ù§Ô∏è</button>

      </form>
    </div>
  </div>

  <script>
    // ------- BASIC DOM REFERENCES -------

    const lockScreen   = document.getElementById("lockScreen");
    const passwordPage = document.getElementById("passwordPage");
    const loveLetter   = document.getElementById("loveLetter");
    const surveyPage   = document.getElementById("surveyPage");
    const bettaCursor  = document.getElementById("bettaCursor");

    // Little helper so betta fish "reacts" when followups appear
    function pulseFish() {
      if (!bettaCursor) return;
      bettaCursor.classList.add("excited");
      setTimeout(() => {
        bettaCursor.classList.remove("excited");
      }, 300);
    }

    // Tap / swipe anywhere on lock to show password page
    lockScreen.addEventListener("click", () => {
      lockScreen.style.display = "none";
      passwordPage.style.display = "flex";
    });

    // ------- CLOCK (12-hour) + DATE -------

    const lockTimeEl = document.getElementById("lockTime");
    const lockAmPmEl = document.getElementById("lockAmPm");
    const lockDateEl = document.getElementById("lockDate");

    function updateClock() {
      const now = new Date();
      let hours = now.getHours();
      const minutes = now.getMinutes().toString().padStart(2, "0");
      const ampm = hours >= 12 ? "PM" : "AM";
      hours = hours % 12;
      if (hours === 0) hours = 12;
      lockTimeEl.textContent = `${hours}:${minutes}`;
      lockAmPmEl.textContent = ampm;
      lockDateEl.textContent = now.toLocaleDateString(undefined, {
        weekday: "long",
        month: "long",
        day: "numeric"
      });
    }
    updateClock();
    setInterval(updateClock, 1000);

    // ------- SIMPLE VIRGO HOROSCOPE TEXT -------

    const horoscopeMain = document.getElementById("horoscopeMain");
    const horoscopeSub  = document.getElementById("horoscopeSub");
    const virgoMessages = [
      ["Pay attention to tiny details today.", "Your effort in the small things is what makes you shine."],
      ["Choose softness over stress.", "You don‚Äôt have to earn rest ‚Äî you already deserve it."],
      ["A tiny step forward still counts.", "Be as patient with yourself as you are with others."],
      ["Let yourself enjoy something silly today.", "Joy doesn‚Äôt have to be productive to be valid."],
      ["Speak up about how you feel.", "Your feelings are not ‚Äòtoo much‚Äô; they‚Äôre important data."],
      ["Let someone take care of you a little.", "You‚Äôre allowed to receive, not only give."],
      ["Reorganize your space, reorganize your mind.", "A tiny reset can change the whole vibe of the day."]
    ];
    const index = new Date().getDate() % virgoMessages.length;
    horoscopeMain.textContent = "Virgo: " + virgoMessages[index][0];
    horoscopeSub.textContent  = virgoMessages[index][1];

    // ------- WEATHER (uses browser location + Open-Meteo) -------

    const weatherMain = document.getElementById("weatherMain");
    const weatherSub  = document.getElementById("weatherSub");

    if ("geolocation" in navigator) {
      navigator.geolocation.getCurrentPosition(
        (pos) => {
          const { latitude, longitude } = pos.coords;
          fetch(`https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&current=temperature_2m,weather_code`)
            .then(res => res.json())
            .then(data => {
              if (data && data.current && typeof data.current.temperature_2m === "number") {
                const c = data.current.temperature_2m;
                const f = Math.round(c * 9/5 + 32);
                weatherMain.textContent = `${f}¬∞F near you`;
                weatherSub.textContent  = "Thanks for letting me check your sky ü•π";
              } else {
                weatherMain.textContent = "Weather unavailable";
              }
            })
            .catch(() => {
              weatherMain.textContent = "Weather unavailable";
            });
        },
        () => {
          weatherMain.textContent = "Location blocked";
          weatherSub.textContent  = "If you allow location, I‚Äôll show it here üíï";
        }
      );
    } else {
      weatherMain.textContent = "No geolocation support";
    }

    // ------- PASSWORD LOGIC -------

    const PASSWORD = "0618"; // <<< CHANGE THIS to whatever you want

    const pwInput  = document.getElementById("pwInput");
    const pwBtn    = document.getElementById("pwBtn");
    const pwError  = document.getElementById("pwError");

    pwBtn.addEventListener("click", () => {
      const value = pwInput.value.trim();
      if (value === PASSWORD) {
        passwordPage.style.display = "none";
        loveLetter.style.display = "flex";
        pwError.textContent = "";
      } else {
        pwError.textContent = "Wrong passcode, try again üòÖ";
      }
    });

    pwInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        pwBtn.click();
      }
    });

    // ------- LOVE LETTER CONTINUE -------

    document.getElementById("continueBtn").addEventListener("click", () => {
      loveLetter.style.display = "none";
      surveyPage.style.display = "block";
    });

    // ------- SLIDERS + CONDITIONAL FOLLOW-UPS -------

    // HUNGER
    const hungerSlider = document.getElementById("hungerSlider");
    const hungerLabel  = document.getElementById("hungerLabel");
    const hungerHungryFollowup = document.getElementById("hungerHungryFollowup");

    function updateHungerUI() {
      const value = Number(hungerSlider.value);
      hungerLabel.textContent = value;

      if (value <= 3) {
        if (!hungerHungryFollowup.classList.contains("show")) pulseFish();
        hungerHungryFollowup.classList.add("show");
      } else {
        hungerHungryFollowup.classList.remove("show");
      }

      // Show congrats if full
      if (value >= 7) {
        showCongratsOnce();
      }
    }

    hungerSlider.addEventListener("input", updateHungerUI);
    updateHungerUI();

    // DAY
    const daySlider = document.getElementById("daySlider");
    const dayLabel  = document.getElementById("dayLabel");
    const dayBadFollowup  = document.getElementById("dayBadFollowup");
    const dayGoodFollowup = document.getElementById("dayGoodFollowup");

    function updateDayUI() {
      const value = Number(daySlider.value);
      dayLabel.textContent = value;

      if (value <= 3) {
        if (!dayBadFollowup.classList.contains("show")) pulseFish();
        dayBadFollowup.classList.add("show");
        dayGoodFollowup.classList.remove("show");
      } else if (value >= 7) {
        if (!dayGoodFollowup.classList.contains("show")) pulseFish();
        dayGoodFollowup.classList.add("show");
        dayBadFollowup.classList.remove("show");
      } else {
        dayBadFollowup.classList.remove("show");
        dayGoodFollowup.classList.remove("show");
      }
    }

    daySlider.addEventListener("input", updateDayUI);
    updateDayUI();

    // TREATMENT
    const treatSlider = document.getElementById("treatSlider");
    const treatLabel = document.getElementById("treatLabel");
    const treatFollowup = document.getElementById("treatFollowup");

    function updateTreatUI() {
      const value = Number(treatSlider.value);
      treatLabel.textContent = value;

      if (value <= 9) {
        if (!treatFollowup.classList.contains("show")) pulseFish();
        treatFollowup.classList.add("show");
      } else {
        treatFollowup.classList.remove("show");
      }
    }

    treatSlider.addEventListener("input", updateTreatUI);
    updateTreatUI();

    // ------- CONFETTI / CONGRATS OVERLAY FOR EATING -------

    const fullCongrats = document.getElementById("fullCongrats");
    const closeCongrats = document.getElementById("closeCongrats");
    let hasCelebrated = false;

    function showCongratsOnce() {
      if (hasCelebrated) return;
      hasCelebrated = true;
      fullCongrats.style.display = "flex";

      if (window.confetti) {
        confetti({
          particleCount: 160,
          spread: 70,
          origin: { y: 0.6 }
        });
      }
    }

    closeCongrats.addEventListener("click", () => {
      fullCongrats.style.display = "none";
    });

    // ------- BETTA FISH FOLLOWING CURSOR (with offset + wobble + flipped direction) -------

    // Hide on touch-only devices (phones/tablets) so it doesn't look weird
    if (window.matchMedia && window.matchMedia("(pointer: coarse)").matches) {
      if (bettaCursor) bettaCursor.style.display = "none";
    } else if (bettaCursor) {
      let mouseX = window.innerWidth / 2;
      let mouseY = window.innerHeight / 2;
      let fishX = mouseX;
      let fishY = mouseY;

      const OFFSET_X = 32;  // pixels to the RIGHT of cursor
      const OFFSET_Y = -10; // pixels slightly ABOVE cursor

      document.addEventListener("mousemove", (e) => {
        mouseX = e.clientX;
        mouseY = e.clientY;
      });

      function animateBetta() {
        const ease = 0.12; // smaller = more floaty
        const dx = mouseX - fishX;
        const dy = mouseY - fishY;

        fishX += dx * ease;
        fishY += dy * ease;

        // Position with offset
        bettaCursor.style.left = (fishX + OFFSET_X) + "px";
        bettaCursor.style.top  = (fishY + OFFSET_Y) + "px";

        // Flip depending on direction (right vs left)
        const facingRight = dx >= 0;
        const flip = facingRight ? -1 : 1; // flipped compared to original

        // Little swim wobble
        const wobble = Math.sin(Date.now() / 150) * 6; // +/- 6 degrees

        bettaCursor.style.transform = `scaleX(${flip}) rotate(${wobble}deg)`;

        requestAnimationFrame(animateBetta);
      }

      animateBetta();
    }
  </script>
</body>
</html>
